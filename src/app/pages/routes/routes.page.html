<ion-content>
  <ion-row>
    <ion-col offset-lg="3" offset-xl="2.5" size-xs="12" size-lg="9" size-xl="7">
      <ion-row>
        <ion-col>
          <h1 class="hide-md-and-above ion-text-center">{{ route?.name }}</h1>
          <h1 class="hide-sm-and-below">{{ route?.name }}</h1>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <h3 class="ion-text-center hide-md-and-above description">{{ route?.description }}</h3>
          <h3 class="hide-sm-and-below description">{{ route?.description }}</h3>
        </ion-col>
      </ion-row>
      <ion-row class="route-tab-selector">
        <ion-col>
          <ion-col size="auto">
            <ion-icon (click)="currentRouteTab = routeTabTypes.MAP" [ngClass]="{ 'active' : currentRouteTab === routeTabTypes.MAP}" class="clickable" src="../../../assets/icons/loci-location.svg"></ion-icon>
          </ion-col>
          <ion-col size="auto">
            <ion-icon (click)="currentRouteTab = routeTabTypes.ROUTE_POST" [ngClass]="{ 'active' : currentRouteTab === routeTabTypes.ROUTE_POST}" class="clickable" src="../../../assets/icons/leaderboard.svg"></ion-icon>
          </ion-col>
          <ion-col size="auto">
            <ion-icon (click)="currentRouteTab = routeTabTypes.TOP_USERS" [ngClass]="{ 'active' : currentRouteTab === routeTabTypes.TOP_USERS}" class="clickable" src="../../../assets/icons/top-user.svg"></ion-icon>
          </ion-col>
        </ion-col>
        <ion-col class="hide-sm-and-below" offset="2.5">
          <ion-col class="nb-vertical-center">
            <ion-icon src="../../../assets/icons/loci-location-orange.svg"></ion-icon><span class="icons-key">Visited location</span> <ion-icon src="../../../assets/icons/loci-location-yellow.svg"> </ion-icon><span class="icons-key">Not yet visited</span>
          </ion-col>
        </ion-col>
        
      </ion-row>
      <ion-row [hidden]="currentRouteTab !== routeTabTypes.MAP">
        <ion-col>
          <ion-row class="post-wrapper">
            <ion-col class="map-wrapper-col">
              <div #map class="map"></div>
            </ion-col>
          </ion-row>
          <ion-row class="hide-md-and-above">
              <ion-col  offset="2.5">
                <ion-col class="nb-vertical-center">
                  <ion-icon src="../../../assets/icons/loci-location-orange.svg"></ion-icon><span class="icons-key">Visited location</span> <ion-icon src="../../../assets/icons/loci-location-yellow.svg"> </ion-icon><span class="icons-key">Not yet visited</span>
                </ion-col>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
      <ion-row *ngIf="currentRouteTab === routeTabTypes.ROUTE_POST">
        <ion-col>
          <app-post-item [post]="route?.post"></app-post-item>
        </ion-col>
      </ion-row>

      <ion-row  *ngIf="currentRouteTab === routeTabTypes.TOP_USERS">
        <ion-col *ngIf="route?.routeTopUsers">
          <!-- <app-post-item *ngIf="topUsersPost" [post]="topUsersPost"></app-post-item> -->

          <ion-row class="post-wrapper">
            <ion-col class="post-wrapper-col">
              <ion-row class="post-title-row">
                <ion-col class=" ion-text-left">
                  <p>View the Route Leaders!</p>
                </ion-col>
              </ion-row>
              <div class="answers expanded">
                <ion-row *ngFor="let topUser of routeTopUsers; index as i" class="answer-item-row">
                  <ion-col>
                      <ion-row class="answer-item expanded">
                        <ion-col size-xs="1.5" size-md="1">
                        </ion-col>
                        <ion-col size-xs="2" size-md="1">
                          <div class="avatar-container">
                            <app-nb-avatar class="avatar"
                              [borderColor]="topUser.visitor.borderColor"
                              [altStyleClass]="'post-answer center-username truncate-username '"
                              [imageSrc]="topUser.visitor.avatarSourceURL"
                              [colorAlt]="colors[i%(colors?.length)]">
                            </app-nb-avatar>
                          </div>
                        </ion-col> 
                        <ion-col class="bar-wrapper ion-text-left" size-xs="8" size-md="8.5">
                          <div class="visitor-name">{{ topUser.visitor.name }}
                            <span class="hide-md-and-above visits-text"> - visited {{ topUser.routeVisits }} / {{ route.post.selections.length }}</span>
                            <span class="hide-sm-and-below visits-text"> - visited {{ topUser.routeVisits }} out of {{ route.post.selections.length }}</span>
                          </div>
                          <!-- [ngStyle]="{ background: chartColor, width: chartBar+'%' }" -->
                          <div class="bar" [ngStyle]="{ 'width': topUser.barWidth, 'background': topUser.barColor }"></div>
                        </ion-col>
                        <ion-col size-xs=".5" size-md=".5">
                          <!-- <span class="vote-count nb-vertical-center">
                            {{ answer.votes.length }}
                          </span> -->
                        </ion-col>
                      </ion-row>
                  </ion-col>
                </ion-row>
          
                <!-- <ion-row *ngIf="answers?.length > defaultNumberOfAnswersToShow && postType !== postTypes.ROUTE">
                  <ion-col class="ion-text-left">
                    <app-jacobi-button class="btn-show-all" (click)="toggleShowAll()" [buttonType]="'clear-primary'"
                      [altStyle]="'text-light-grey paragraph text-left'">{{ viewRangeText }}</app-jacobi-button>
                  </ion-col>
                </ion-row> -->
              </div>
            </ion-col>
          </ion-row>
          
        </ion-col>
      </ion-row>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col offset-lg="3" offset-xl="2.5" size-xs="12" size-lg="9" size-xl="7" class="community-feed-col">

      <!-- <ion-row *ngIf="heroAd">
        <ion-col size="12">
          <app-marquee-ad [heroAd]="heroAd" [isCommunityAd]="true"></app-marquee-ad>
        </ion-col>
      </ion-row> -->

      <ion-row *ngIf="route" class="post-question-row">
        <ion-col class="post-question-col">
          <app-post-question [feedContextId]="route.id" [feedType]="feedTypes.ROUTE" [postQuestionPromptText]="'Post a question about this route...'"></app-post-question>
        </ion-col>
      </ion-row>
      

      <ion-row class="posts-container">
        <ion-col class="nb-no-padding" size="12">
          <!-- <div>
            <ion-row class="community-post-row specific-post" *ngIf="specificPost">
              <ion-col class="community-post-col">
                <app-post-item [post]="specificPost"></app-post-item>
              </ion-col>
            </ion-row>
          </div> -->
          <div *ngFor="let post of routeQuestions; index as i;">
            <ion-row class="community-post-row">
              <ion-col class="community-post-col">
                <app-post-item [feedType]="feedTypes.ROUTE" [restrictedAvailableAnswers]="route.post.selections" [post]="post"></app-post-item>
              </ion-col>
            </ion-row>
            <!-- <ion-row class="community-post-row">
              <ion-col class="community-post-col">
                <app-post-item *ngIf="shouldShowVendorPost(i)"  [post]="vendorPosts[getVendorPostIndex(i)]"></app-post-item>
              </ion-col>
            </ion-row> -->
          </div>

          <ion-row *ngIf="showLoadMore">
            <ion-col class="load-more-posts-wrapper">
              <app-jacobi-button (click)="loadMorePosts()" [buttonType]="'ghost-green-primary'"
                [altStyle]="'width-fit-content'">Load More</app-jacobi-button>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-col>
  </ion-row>

</ion-content>